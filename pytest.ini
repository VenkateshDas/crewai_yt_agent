[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

markers =
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    slow: marks tests as slow
    auth: marks authentication related tests
    video: marks video analysis related tests
    middleware: marks middleware related tests
    model: marks model validation related tests
    utils: marks utility functions related tests

addopts = 
    --strict-markers
    -v
    --cov=src
    --cov-report=term-missing
    --cov-report=xml
    --cov-report=html
    --no-cov-on-fail

# Environment variables for tests
env =
    API_SECRET_KEY=test-secret-key-for-testing-only
    SUPABASE_URL=https://test.supabase.co
    SUPABASE_ANON_KEY=test-anon-key
    API_DEBUG=true
    ENVIRONMENT=test
    CORS_ORIGINS=http://localhost:3000,http://localhost:8000
    MAX_REQUEST_SIZE_MB=10
    DAILY_GUEST_LIMIT=3

# Test file discovery and execution
norecursedirs = .git src .venv venv env node_modules build dist 